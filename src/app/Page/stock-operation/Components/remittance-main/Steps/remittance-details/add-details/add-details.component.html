<form [formGroup]="pageForm" (ngSubmit)="add(pageForm)">
  <div fxLayout fxLayoutGap="6px">
    <mat-form-field class="mt-1 input-size input-text-size" appearance="outline">
      <mat-label>کالا</mat-label>
      <mat-select placeholder="کالا" #goodCtrl formControlName="goodCtrl" disableOptionCentering>

        <mat-select-trigger>
          {{ goodCtrl.value?.name }}
        </mat-select-trigger>
        <mat-option>
          <ngx-mat-select-search [formControl]="goodFilterCtrl" placeholderLabel="جستجو..."
            noEntriesFoundLabel="موردی یافت نشد"></ngx-mat-select-search>
        </mat-option>
        <mat-option class="mt-2" *ngFor="let good of filterGoods | async ;let i=index;" [value]="good">
          {{good.name}}
          <!-- <div fxLayout="row" fxLayoutAlign="space-between">
                                    <div>
                                        <span class="ms-2">{{i+1}}</span>
                                        <span> {{stock.name}}</span>
                                    </div>
                                    <span>{{stock.address}}</span>
                                </div> -->
        </mat-option>

      </mat-select>
      <mat-error *ngIf="errorHandling('goodCtrl', 'required')">
        انتخاب انبار اجباری است
      </mat-error>
    </mat-form-field>
    <mat-form-field class="mt-1 input-size input-text-size numberTextView-width-size" appearance="outline"
      color="primary">
      <mat-label>شماره بچ (batch)</mat-label>
      <input matInput placeholder="شماره بچ : 1234 ب..." #batchNumber formControlName="batchNumber" />
      <!-- <mat-error *ngIf="errorHandling('batchNumber', 'required')">
        وارد کردن شماره بچ اجباری است
      </mat-error>
      <mat-error *ngIf="errorHandling('batchNumber', 'pattern')">
        عدد وارد کنید
      </mat-error> -->
      <!-- <mat-hint>Hint</mat-hint> -->
    </mat-form-field>
    <mat-form-field class="mt-1 input-size input-text-size" appearance="outline" color="primary">
      <mat-label> تاریخ انقضا</mat-label>
      <input matInput [matDatepicker]="picker" placeholder="تاریخ انقضا" #datePicker readonly formControlName="datePicker"
        (dateChange)="onChange($event)" >
        <button matDatepickerToggleIcon *ngIf="datePicker.value" matSuffix mat-icon-button aria-label="Clear" (click)="clearDate($event)">
          <mat-icon>close</mat-icon>
        </button>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker>
        <mat-datepicker-actions>
          <button mat-button matDatepickerCancel>انصراف</button>
          <button mat-raised-button color="primary" matDatepickerApply>تایید</button>
        </mat-datepicker-actions>
      </mat-datepicker>
      <!-- <mat-error *ngIf="errorHandling('datePicker', 'required')">
        وارد کردن تاریخ اجباری است
      </mat-error> -->
    </mat-form-field>

    <mat-form-field class="mt-1 input-size input-text-size numberTextView-width-size" appearance="outline"
      color="primary">
      <mat-label>تعداد</mat-label>
      <input matInput placeholder="1 ..." #count formControlName="count" [pattern]="numberPattern" />
      <mat-error *ngIf="errorHandling('count', 'required')">
        وارد کردن تعداد اجباری است
      </mat-error>
      <mat-error *ngIf="errorHandling('count', 'pattern')">
        عدد وارد کنید
      </mat-error>
    </mat-form-field>

    <mat-form-field class="mt-1 input-size input-text-size" appearance="outline" color="primary">
      <mat-label>(ریال)قیمت</mat-label>
      <input matInput placeholder="1,000" #price formControlName="price" PersianCurency />
      <mat-error *ngIf="errorHandling('price', 'required')">
        انتخاب انبار اجباری است
      </mat-error>
    </mat-form-field>

    <div fxLayout="row" fxLayoutAlign="center center" class="ms-3">
      <button mat-raised-button color="primary" [disabled]="pageForm.invalid" class="mb-2">
        <i class="icon-plus-square icon-19px _white-color"></i>
        <span class="me-1">افزودن</span>
      </button>
    </div>
  </div>
</form>
