<div fxLayout>
  <mat-card class="good-list position-relative card-height" fxFlex="100%">

    <div *ngIf="isLoading$ | async; else table" fxLayout="column" fxLayoutAlign="center center">
      <div class="loading-shade" *ngIf="isLoading$ | async">
        <div fxLayout="column" fxLayoutAlign="center center">
          <mat-progress-spinner [strokeWidth]="3" [diameter]="30" [mode]="'indeterminate'" *ngIf="isLoading$ | async"></mat-progress-spinner>
          <h3 class="mt-3">در حال دریافت اطلاعت از سرور ...</h3>
        </div>
      </div>
    </div>
    <!-- menu -->


    <!-- menu -->

    <!-- DataTable -->
    <ng-template #table>
      <div fxLayout="column">
        <div class="remitt-list_header" fxLayout="row" fxFill>
          <div class="devices-list_header_action-btn" fxFlexAlign="center center">
            <button mat-icon-button matTooltipClass="tooltip-style" matTooltip="جستجوی" (click)="toggleFilters = !toggleFilters"
              matTooltipPosition="right">
              <div *ngIf="toggleFilters;else close">
                <mat-icon>search</mat-icon>
              </div>
              <ng-template #close>
                <mat-icon>search_off</mat-icon>
              </ng-template>
              <!-- search_off -->
            </button>
          </div>
          <div fxLayout="row" fxLayoutGap="15px" fxFlexAlign="center center" class="search-box w-100" *ngIf="!toggleFilters">
            <div fxLayout="row" fxFlexAlign="space-between">
              <div fxLayout="row" [ngSwitch]="searchControl" fxLayoutGap="15px" >
                <div *ngSwitchCase="search_control.isDropDownShow" >
                  <mat-form-field appearance="outline" style="margin-left: 10px; width: 145px; font-size: 10px;">
                    <mat-label>وضعیت تردد</mat-label>
                    <mat-select>
                      <mat-option value="option1">Option 1</mat-option>
                      <mat-option value="option2">Option 2 </mat-option>
                      <mat-option value="option3">Option 3</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div *ngSwitchCase="search_control.isTextBoxShow" >
                  <mat-form-field appearance="standard">
                    <mat-label>Filter</mat-label>
                    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input>
                  </mat-form-field>
                </div>
                <div *ngSwitchCase="search_control.isDateBoxShow" >
                  <mat-form-field  class=" input-size" appearance="outline" color="primary">
                    <mat-label>تاریخ</mat-label>
                    <input matInput [matDatepicker]="picker" placeholder="تاریخ شروع قرارداد"r readonly
                     >
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker>
                      <mat-datepicker-actions>
                        <button mat-button matDatepickerCancel>انصراف</button>
                        <button mat-raised-button color="primary" matDatepickerApply>تایید</button>
                      </mat-datepicker-actions>
                    </mat-datepicker>
  
                  </mat-form-field>
                </div>
                <div *ngIf="isSearchButonShow" fxFlexAlign="center center">
                  <button mat-flat-button mat-Stroked-button color="primary">
                    <span color="primary">جستجو</span>
                  </button>
                </div>
               
              </div>
              <div fxLayout="row" fxLayoutGap="12px" >
                <mat-radio-group class="radio-btns" [(ngModel)]="searchType" (change)="radioChange($event)">
                  <mat-radio-button value="all" checked="true">همه</mat-radio-button>
                  <mat-radio-button value="id">کدحواله</mat-radio-button>
                  <mat-radio-button value="bachNumber">شماره بچ</mat-radio-button>
                  <mat-radio-button value="personName">مشتری</mat-radio-button>
                  <mat-radio-button value="stockName">انبار</mat-radio-button>
                  <mat-radio-button value="remittenceType">نوع حواله</mat-radio-button>
                  <mat-radio-button value="date">تاریخ</mat-radio-button>
                </mat-radio-group>
              </div>
            </div>
          </div>

        </div>
        <!-- @blub -->
        <div class="example-table-container">
          <!-- [@listAnimation]="dataSource.data.length" -->
          <table mat-table  *ngIf="dataSource.data.length"
            [dataSource]="dataSource" class="w-100 text-right table-width ">

            <!-- Index Column -->
            <ng-container matColumnDef="index">
              <th class="text-center" mat-header-cell *matHeaderCellDef class="index-col-width">#</th>
              <td class=" mat-column-small-width" mat-cell *matCellDef="let element;index as i;">
                {{i+1}}
              </td>
            </ng-container>
            <!-- id Column -->
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef class="id-col-width">
                کدحواله
              </th>
              <td mat-cell *matCellDef="let element"> {{element.id}}</td>
            </ng-container>
            <!-- bachNumber Column -->
            <ng-container matColumnDef="bachNumber">
              <th mat-header-cell *matHeaderCellDef class="batch-col-width">شماره بچ</th>
              <td mat-cell *matCellDef="let element"> {{element.bacthNumber}} </td>
            </ng-container>
            <!-- personName Column -->
            <ng-container matColumnDef="personName">
              <th mat-header-cell *matHeaderCellDef  class="name-col-width">مشتری</th>
              <td mat-cell *matCellDef="let element">{{element.personName}} </td>
            </ng-container>
            <!-- stockName Column -->
            <ng-container matColumnDef="stockName">
              <th mat-header-cell *matHeaderCellDef  class="stock-col-width">انبار</th>
              <td mat-cell *matCellDef="let element">{{element.stockName}} </td>
            </ng-container>
            <!-- remittenceType Column -->
            <ng-container matColumnDef="remittenceType">
              <th mat-header-cell *matHeaderCellDef  class="remittancetype-col-width">نوع حواله</th>
              <td mat-cell *matCellDef="let element"> {{getOperationType(element.stockOperationType)}} </td>
            </ng-container>
            <!-- date Column -->
            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef  class="date-col-width">تاریخ تنظیم</th>
              <td mat-cell *matCellDef="let element"> {{getShamsi(element.registerDate)}} </td>
            </ng-container>
            <!-- desc Column -->
            <ng-container matColumnDef="desc">
              <th mat-header-cell *matHeaderCellDef  class="dec-col-width">توضیحات</th>
              <td mat-cell *matCellDef="let element"> {{element.description}} </td>
            </ng-container>
            <!-- Delete -->
            <ng-container matColumnDef="menu">
              <th mat-header-cell class="text-center" *matHeaderCellDef></th>
              <td mat-cell class="mat-column-small-width text-left menu-width" *matCellDef="let row">
                <div [hidden]="row.id != currentRow">

                  <!-- <mat-icon title="Reset Password" color='accent' (click)="clickTest()">
                                lock_reset</mat-icon> -->

                  <!-- <button mat-icon-button>
                    <i class="icon-edit-3 icon-20px "></i>
                  </button> -->
                  <button mat-icon-button matTooltip="نمایش جزییات" matTooltipPosition="right" (click)="getDetails(row)">
                    <i class="icon-eye icon-20px "></i>
                  </button>
                  <!-- <mat-icon title="Delete Card" color='warn' (click)="clickTest()">delete</mat-icon> -->

                </div>
              </td>
            </ng-container>


            <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
            <!-- <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
            </tr> -->
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="{hovered: row.hovered}"
              (mouseover)="row.hovered = true" (mouseover)="currentRow = row.id" (mouseout)="currentRow= -1"
              (mouseout)="row.hovered = false">
            </tr>
          </table>

        </div>
        <!-- <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons #paginator
          aria-label="Select page of periodic elements">
        </mat-paginator> -->
      </div>
    </ng-template>
    <!-- DataTable -->

  </mat-card>
</div>
